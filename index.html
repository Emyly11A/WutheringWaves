<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wuthering Waves Collection</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Orbitron:wght@400;700;900&display=swap');
        :root {
            --bg-color: #0c0f18;
            --primary-color: #4a638c;
            --secondary-color: #2e435e;
            --text-color: #e0e7f4;
            --highlight-color: #fce477;
            --button-color: #5d5d8b;
            --button-hover: #7a7ab3;
            --gold-color: #ffd700;
            --purple-color: #845cb0;
            --blue-color: #5b8def;
            --wave-gradient: linear-gradient(135deg, rgba(30, 20, 60, 0.9), rgba(50, 30, 90, 0.85), rgba(70, 40, 120, 0.8));
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('https://st.depositphotos.com/1016440/2534/i/450/depositphotos_25344733-stock-photo-sunrise-at-the-beach.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Navigație */
        nav {
            background: var(--wave-gradient);
            padding: 1rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }
        
        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--highlight-color);
            text-shadow: 0 0 10px rgba(252, 228, 119, 0.3);
            letter-spacing: 1px;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-links a:hover {
            background-color: rgba(255, 255, 255, 0.05); /* Redus opacitatea */
            transform: translateY(-2px);
        }
        
        .nav-links a.active {
            color: var(--highlight-color);
            background-color: rgba(252, 228, 119, 0.05); /* Redus opacitatea */
        }
        
        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--highlight-color);
            border-radius: 3px;
        }
        
        /* Auth container */
        .auth-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            border: 1px solid var(--highlight-color);
        }
        
        .username {
            font-weight: 600;
            color: var(--highlight-color);
        }
        
        /* Buton de autentificare îmbunătățit */
        .auth-button {
            position: relative;
            padding: 0.6rem 1.2rem;
            background: linear-gradient(135deg, var(--button-color), var(--primary-color));
            border: none;
            border-radius: 30px;
            color: var(--text-color);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            z-index: 1;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Umbră mai subtilă */
        }
        
        .auth-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--button-hover), var(--primary-color));
            z-index: -1;
            transition: all 0.3s ease;
            opacity: 0;
        }
        
        .auth-button:hover::before {
            opacity: 1;
        }
        
        .auth-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3); /* Umbră mai subtilă */
        }
        
        .auth-button:active {
            transform: translateY(-1px);
        }
        
        /* Efect de strălucire pentru buton */
        .auth-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .auth-button:hover::after {
            left: 100%;
        }
        
        /* Pulsare pentru butonul de autentificare */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(252, 228, 119, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(252, 228, 119, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(252, 228, 119, 0);
            }
        }
        
        .auth-button.pulse {
            animation: pulse 2s infinite;
        }
        
        /* Icon pentru utilizator */
        .user-icon {
            width: 20px;
            height: 20px;
            fill: var(--highlight-color);
            margin-right: 0.3rem;
        }
        
        /* Selector de limbă */
        .language-selector {
            position: relative;
            margin-left: 1rem;
        }
        
        .language-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--primary-color);
            border-radius: 30px;
            padding: 0.5rem 1rem;
            color: var(--text-color);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .language-button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--highlight-color);
        }
        
        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: var(--wave-gradient);
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-color);
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            min-width: 150px;
        }
        
        .language-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .language-option {
            padding: 0.7rem 1.2rem;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        
        .language-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .language-option.active {
            background: rgba(252, 228, 119, 0.2);
            color: var(--highlight-color);
        }
        
        .flag-icon {
            width: 24px;
            height: 18px;
            object-fit: cover;
            border-radius: 2px;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
        }
        
        /* Conținut pagină */
        .content {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .page.active {
            display: block;
        }
        
        /* Modal Auth */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--wave-gradient);
            border-radius: 15px;
            padding: 2rem;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            border: 2px solid var(--primary-color);
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--highlight-color);
        }
        
        .close-button {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close-button:hover {
            color: var(--highlight-color);
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--primary-color);
        }
        
        .auth-tab {
            flex: 1;
            padding: 0.8rem;
            text-align: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        
        .auth-tab.active {
            color: var(--highlight-color);
            border-bottom-color: var(--highlight-color);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-input {
            width: 100%;
            padding: 0.8rem;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1rem;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--highlight-color);
            box-shadow: 0 0 0 2px rgba(252, 228, 119, 0.2);
        }
        
        .form-button {
            width: 100%;
            padding: 0.8rem;
            background: linear-gradient(135deg, var(--button-color), var(--primary-color));
            border: none;
            border-radius: 8px;
            color: var(--text-color);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .form-button:hover {
            background: linear-gradient(135deg, var(--button-hover), var(--primary-color));
            transform: translateY(-2px);
        }
        
        .form-message {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
        
        .form-message.error {
            background-color: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            color: #ff6b7d;
            display: block;
        }
        
        .form-message.success {
            background-color: rgba(40, 167, 69, 0.2);
            border: 1px solid #28a745;
            color: #5dd474;
            display: block;
        }
        
        /* Pagina principală */
        .main-page {
            text-align: center;
        }
        
        .main-page h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            color: var(--text-color);
            margin-bottom: 1.5rem;
            text-shadow: 0 0 15px rgba(252, 228, 119, 0.3);
            letter-spacing: 2px;
            background: linear-gradient(90deg, var(--highlight-color), var(--text-color), var(--highlight-color));
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shine 3s linear infinite;
        }
        
        @keyframes shine {
            to {
                background-position: 200% center;
            }
        }
        
        .main-page .description {
            background: var(--wave-gradient);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-color);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .main-page .description h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--highlight-color);
        }
        
        .main-page .description p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .features {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }
        
        .feature-card {
            background: var(--wave-gradient);
            border-radius: 15px;
            padding: 1.5rem;
            width: 250px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-color);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
        }
        
        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--highlight-color);
        }
        
        .feature-card p {
            font-size: 1rem;
            line-height: 1.5;
        }
        
        /* Pagina Wish */
        .wish-container {
            background: var(--wave-gradient);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            border: 2px solid var(--primary-color);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }
        
        .wish-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold-color), var(--purple-color), var(--blue-color), var(--purple-color), var(--gold-color));
            background-size: 200% 100%;
            animation: gradientShift 5s ease infinite;
        }
        
        .wish-container h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 0.5rem;
            text-shadow: 0 0 10px rgba(252, 228, 119, 0.3);
            letter-spacing: 1px;
        }
        
        .wish-container p {
            margin-bottom: 1.5rem;
        }
        
        .counters {
            display: flex;
            justify-content: space-around;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .counter-box {
            padding: 1rem;
            background-color: rgba(74, 99, 140, 0.4);
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            min-width: 150px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .counter-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--gold-color), var(--purple-color), var(--blue-color));
        }
        
        .counter-box span {
            color: var(--highlight-color);
            font-weight: 800;
            margin-left: 5px;
        }
        
        .wish-results {
            background-color: rgba(30, 42, 59, 0.6);
            min-height: 180px;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            border: 1px dashed var(--primary-color);
            overflow-y: auto;
            max-height: 300px;
            backdrop-filter: blur(3px);
        }
        
        .wish-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            background-color: rgba(74, 99, 140, 0.6);
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            width: 100%;
            transition: transform 0.3s ease;
            box-sizing: border-box;
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0; /* Initially hidden for reveal animation */
            transform: scale(0.8) translateY(-20px); /* Initial state for reveal */
        }
        
        .wish-item:hover {
            transform: translateX(5px);
        }
        
        .wish-item.rarity-5-item {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(74, 99, 140, 0.6));
            border: 1px solid rgba(255, 215, 0, 0.5);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        
        .wish-item.rarity-4-item {
            background: linear-gradient(135deg, rgba(132, 92, 176, 0.2), rgba(74, 99, 140, 0.6));
            border: 1px solid rgba(132, 92, 176, 0.5);
            box-shadow: 0 0 10px rgba(132, 92, 176, 0.2);
        }
        
        .wish-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid var(--highlight-color);
            flex-shrink: 0;
        }
        
        .wish-item .details {
            text-align: left;
            flex-grow: 1;
            min-width: 0;
        }
        
        .wish-item .name {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .wish-item .rarity {
            font-size: 0.9rem;
            color: #d8d8d8;
            margin: 0;
        }
        
        .rarity-5 { color: var(--gold-color); font-weight: 800; }
        .rarity-4 { color: var(--purple-color); font-weight: 600; }
        .rarity-3 { color: #565656; }
        .rarity-text-5 { 
            color: var(--gold-color); 
            font-weight: 800;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }
        .rarity-text-4 { 
            color: var(--purple-color); 
            font-weight: 600;
            text-shadow: 0 0 5px rgba(132, 92, 176, 0.5);
        }
        .rarity-text-3 { 
            color: var(--blue-color); 
            font-weight: 600;
            text-shadow: 0 0 5px rgba(91, 141, 239, 0.5);
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .wish-button {
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            background: linear-gradient(135deg, var(--button-color), var(--primary-color));
            color: var(--text-color);
            border: none;
            border-radius: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .wish-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .wish-button:hover::before {
            left: 100%;
        }
        
        .wish-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .wish-button:active {
            transform: translateY(1px);
        }
        
        .stats-container {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        
        .stats-box {
            flex: 1;
            min-width: 150px;
            padding: 1rem;
            background-color: rgba(74, 99, 140, 0.4);
            border-radius: 10px;
            border: 1px solid var(--primary-color);
        }
        
        .stats-title {
            font-size: 0.9rem;
            color: var(--highlight-color);
            margin: 0 0 0.5rem;
        }
        
        .stats-value {
            font-size: 1.5rem;
            font-weight: 800;
            margin: 0;
        }
        
        .filter-buttons {
            display: flex;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .filter-button {
            padding: 0.5rem 1rem;
            background-color: rgba(74, 99, 140, 0.6);
            border: 1px solid var(--primary-color);
            border-radius: 20px;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .filter-button:hover {
            background-color: var(--primary-color);
        }
        
        .filter-button.active {
            background-color: var(--highlight-color);
            color: var(--bg-color);
            border-color: var(--gold-color);
        }
        
        .pity-history {
            margin-top: 1.5rem;
            background-color: rgba(30, 42, 59, 0.6);
            border-radius: 10px;
            padding: 1rem;
            border: 1px dashed var(--primary-color);
        }
        
        .pity-history h3 {
            margin-bottom: 0.8rem;
            color: var(--highlight-color);
        }
        
        .pity-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .pity-item:last-child {
            border-bottom: none;
        }
        
        .pity-character {
            font-weight: 600;
        }
        
        .pity-count {
            color: var(--highlight-color);
            font-weight: 800;
        }
        
        /* Pagina Caractere */
        .collection-container {
            background: var(--wave-gradient);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
            border: 2px solid var(--primary-color);
            backdrop-filter: blur(5px);
        }
        
        .collection-container h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-color);
            margin-bottom: 1.5rem;
            text-align: center;
            text-shadow: 0 0 10px rgba(252, 228, 119, 0.3);
            letter-spacing: 1px;
        }
        
        .rarity-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .rarity-tab {
            padding: 0.7rem 1.5rem;
            background-color: rgba(74, 99, 140, 0.6);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            border: 2px solid transparent;
        }
        
        .rarity-tab:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .rarity-tab.active {
            background-color: var(--highlight-color);
            color: var(--bg-color);
            border-color: var(--gold-color);
            box-shadow: 0 0 15px rgba(252, 228, 119, 0.4);
        }
        
        .collection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .collection-item {
            background-color: rgba(74, 99, 140, 0.6);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .collection-item:hover {
            transform: translateY(-5px);
        }
        
        .collection-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .collection-item .info {
            padding: 1rem;
        }
        
        .collection-item .name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .collection-item .rarity {
            font-size: 0.9rem;
            color: #d8d8d8;
        }
        
        /* Pagina Arme - Imagini mai mici */
        #weapons .collection-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .empty-collection {
            text-align: center;
            padding: 2rem;
            color: #d8d8d8;
        }
        
        /* Animations */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes sparkle {
            0% { transform: translateY(0) scale(0); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes glow {
            0% { box-shadow: 0 0 5px var(--highlight-color); }
            50% { box-shadow: 0 0 20px var(--highlight-color); }
            100% { box-shadow: 0 0 5px var(--highlight-color); }
        }
        
        .special-glow {
            animation: glow 2s infinite;
        }
        
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--highlight-color);
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: sparkle 1.5s linear infinite;
        }
        
        /* Wishing Animation Overlay Styles - Video Effect */
        .wish-animation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            flex-direction: column;
        }
        
        .wish-animation-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .video-container {
            position: relative;
            width: 80%;
            max-width: 800px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(252, 228, 119, 0.5);
        }
        
        .wish-video {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .wishing-text {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            color: var(--highlight-color);
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
            animation: pulse-glow 1.5s infinite alternate;
            z-index: 10;
        }
        
        @keyframes pulse-glow {
            0% { transform: scale(1); text-shadow: 0 0 10px var(--highlight-color), 0 0 20px rgba(0, 0, 0, 0.8); }
            100% { transform: scale(1.05); text-shadow: 0 0 25px var(--highlight-color), 0 0 30px rgba(0, 0, 0, 0.8); }
        }
        
        /* Individual item reveal animations */
        .wish-item.reveal-item-3 { animation: reveal-item-3 1.2s forwards; }
        .wish-item.reveal-item-4 { animation: reveal-item-4 1.2s forwards; }
        .wish-item.reveal-item-5 { animation: reveal-item-5 1.2s forwards; }
        
        @keyframes reveal-item-3 {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(-20px); 
                background-color: rgba(91, 141, 239, 0.2); 
                border-color: rgba(91, 141, 239, 0.5); 
                box-shadow: 0 0 10px rgba(91, 141, 239, 0.5);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.05) translateY(0); 
                background-color: rgba(91, 141, 239, 0.4); 
                border-color: var(--blue-color); 
                box-shadow: 0 0 20px rgba(91, 141, 239, 0.8);
            }
            100% { 
                opacity: 1; 
                transform: scale(1); 
                background-color: rgba(74, 99, 140, 0.6); 
                border-color: rgba(255, 255, 255, 0.1); 
                box-shadow: 0 0 15px rgba(91, 141, 239, 0.3);
            }
        }
        
        @keyframes reveal-item-4 {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(-20px); 
                background-color: rgba(132, 92, 176, 0.2); 
                border-color: rgba(132, 92, 176, 0.5); 
                box-shadow: 0 0 10px rgba(132, 92, 176, 0.5);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.05) translateY(0); 
                background-color: rgba(132, 92, 176, 0.4); 
                border-color: var(--purple-color); 
                box-shadow: 0 0 20px rgba(132, 92, 176, 0.8);
            }
            100% { 
                opacity: 1; 
                transform: scale(1); 
                background-color: rgba(74, 99, 140, 0.6); 
                border-color: rgba(255, 255, 255, 0.1); 
                box-shadow: 0 0 15px rgba(132, 92, 176, 0.3);
            }
        }
        
        @keyframes reveal-item-5 {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(-20px); 
                background-color: rgba(255, 215, 0, 0.2); 
                border-color: rgba(255, 215, 0, 0.5); 
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.05) translateY(0); 
                background-color: rgba(255, 215, 0, 0.4); 
                border-color: var(--gold-color); 
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.7);
            }
            100% { 
                opacity: 1; 
                transform: scale(1); 
                background-color: rgba(74, 99, 140, 0.6); 
                border-color: rgba(255, 255, 255, 0.1); 
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                gap: 0.8rem;
            }
            
            .nav-links a {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }
            
            .main-page h1 {
                font-size: 2.2rem;
            }
            
            .wish-container {
                padding: 1.5rem;
            }
            
            .wish-container h1 {
                font-size: 2rem;
            }
            
            .counter-box {
                min-width: 100px;
                padding: 0.8rem;
                font-size: 1rem;
            }
            
            .wish-item .name {
                font-size: 1rem;
            }
            
            .collection-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 1rem;
            }
            
            .collection-item img {
                height: 150px;
            }
            
            #weapons .collection-item img {
                height: 120px;
            }
            
            .wishing-text {
                font-size: 1.8rem;
                bottom: 20px;
            }
            
            .video-container {
                width: 95%;
            }
            
            .language-selector {
                margin-left: 0.5rem;
            }
            
            .flag-icon {
                width: 20px;
                height: 15px;
            }
        }
        
        /* Hamburger menu styles */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--highlight-color);
            cursor: pointer;
            margin-left: 1rem;
        }

        @media (max-width: 900px) {
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%; /* Below the nav bar */
                left: 0;
                width: 100%;
                background: var(--wave-gradient);
                border-top: 1px solid var(--primary-color);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                padding: 1rem 0;
            }

            .nav-links.open {
                display: flex !important;
                z-index: 1000;
            }

            .nav-links li {
                width: 100%;
                text-align: center;
            }

            .nav-links a {
                display: block;
                padding: 0.8rem 1rem;
                border-radius: 0;
            }

            .menu-toggle {
                display: block;
            }
        }
    </style>
</head>
<body>
    <!-- Navigație -->
    <nav>
        <div class="nav-container">
            <div class="logo" data-translate="logo">Wuthering Waves Collection</div>
            <button class="menu-toggle" id="menuToggle" aria-label="Deschide meniul">&#9776;</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="#" class="nav-link active" data-page="main" data-translate="nav-main">Meniu Principal</a></li>
                <li><a href="#" class="nav-link" data-page="wish" data-translate="nav-wish">Wish</a></li>
                <li><a href="#" class="nav-link" data-page="characters" data-translate="nav-characters">Caractere</a></li>
                <li><a href="#" class="nav-link" data-page="weapons" data-translate="nav-weapons">Arme</a></li>
            </ul>
            <div class="auth-container">
                <div class="user-info" id="userInfo" style="display: none;">
                    <svg class="user-icon" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    <span class="username" id="username"></span>
                </div>
                <button class="auth-button pulse" id="authButton" data-translate="auth-login">Autentificare</button>
                
                <!-- Selector de limbă -->
                <div class="language-selector">
                    <div class="language-button" id="languageButton">
                        <img src="https://flagcdn.com/24x18/ro.png" alt="Română" class="flag-icon" id="currentFlag">
                        <span id="currentLang">RO</span>
                    </div>
                    <div class="language-dropdown" id="languageDropdown">
                        <div class="language-option active" data-lang="ro">
                            <img src="https://flagcdn.com/24x18/ro.png" alt="Română" class="flag-icon">
                            <span>Română</span>
                        </div>
                        <div class="language-option" data-lang="en">
                            <img src="https://flagcdn.com/24x18/gb.png" alt="English" class="flag-icon">
                            <span>English</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Modal Autentificare/Înregistrare -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-translate="auth-title">Autentificare</h2>
                <button class="close-button" id="closeModal">&times;</button>
            </div>
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login" data-translate="auth-login-tab">Autentificare</div>
                <div class="auth-tab" data-tab="register" data-translate="auth-register-tab">Înregistrare</div>
            </div>
            <form class="auth-form active" id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="loginUsername" data-translate="auth-username">Nume utilizator</label>
                    <input type="text" class="form-input" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="loginPassword" data-translate="auth-password">Parolă</label>
                    <input type="password" class="form-input" id="loginPassword" required>
                </div>
                <button type="submit" class="form-button" data-translate="auth-login-btn">Autentificare</button>
                <div class="form-message" id="loginMessage"></div>
            </form>
            <form class="auth-form" id="registerForm">
                <div class="form-group">
                    <label class="form-label" for="registerUsername" data-translate="auth-username">Nume utilizator</label>
                    <input type="text" class="form-input" id="registerUsername" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="registerEmail" data-translate="auth-email">Email</label>
                    <input type="email" class="form-input" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="registerPassword" data-translate="auth-password">Parolă</label>
                    <input type="password" class="form-input" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="confirmPassword" data-translate="auth-confirm-password">Confirmă parola</label>
                    <input type="password" class="form-input" id="confirmPassword" required>
                </div>
                <button type="submit" class="form-button" data-translate="auth-register-btn">Înregistrare</button>
                <div class="form-message" id="registerMessage"></div>
            </form>
        </div>
    </div>
    
    <!-- Conținut -->
    <div class="content">
        <!-- Pagina Principală -->
        <div class="page active" id="main">
            <div class="main-page">
                <h1 data-translate="main-title">Wuthering Waves Collection</h1>
                
                <div class="description">
                    <h2 data-translate="main-welcome">Bun venit în lumea Wuthering Waves!</h2>
                    <p data-translate="main-description-1">Acest site este dedicat colecționarilor și fanilor jocului Wuthering Waves. Aici poți simula sistemul de "wish" pentru a obține personaje și arme, poți vizualiza colecția ta și poți urmări progresul tău în joc.</p>
                    <p data-translate="main-description-2">Scopul nostru este să oferim o experiență cât mai apropiată de cea reală, cu rate de drop personalizabile și un design atractiv.</p>
                    <p id="welcomeMessage" style="display: none;" data-translate="main-login-prompt">Autentifică-te pentru a-ți salva progresul!</p>
                </div>
                
                <div class="features">
                    <div class="feature-card">
                        <h3 data-translate="feature-simulator-title">Simulator Wish</h3>
                        <p data-translate="feature-simulator-desc">Simulează sistemul de wish din joc cu rate personalizabile și pity tracking pentru 5 stele.</p>
                    </div>
                    <div class="feature-card">
                        <h3 data-translate="feature-characters-title">Colecție Personaje</h3>
                        <p data-translate="feature-characters-desc">Vizualizează toate personajele pe care le-ai obținut, organizate după raritate.</p>
                    </div>
                    <div class="feature-card">
                        <h3 data-translate="feature-weapons-title">Colecție Arme</h3>
                        <p data-translate="feature-weapons-desc">Explorează arsenalul tău complet, cu toate armele organizate pe categorii.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Pagina Wish -->
        <div class="page" id="wish">
            <div class="wish-container">
                <h1 data-translate="wish-title">Wuthering Waves Wishing Simulator</h1>
                <p data-translate="wish-description">Apasă pe butoane pentru a face o tragere!<br></p>
                
                <div class="counters">
                    <div class="counter-box" data-translate="wish-total-wishes">Total Trageri: <span id="totalWishes">0</span></div>
                    <div class="counter-box" data-translate="wish-pity-5">Pity 5-stele: <span id="pity5Star">0</span>/80</div>
                    <div class="counter-box" data-translate="wish-pity-4">Pity 4-stele: <span id="pity4Star">0</span>/10</div>
                </div>
                
                <div class="filter-buttons">
                    <div class="filter-button active" data-filter="all" data-translate="wish-filter-all">Toate</div>
                    <div class="filter-button" data-filter="5" data-translate="wish-filter-5">5-stele</div>
                    <div class="filter-button" data-filter="4" data-translate="wish-filter-4">4-stele</div>
                    <div class="filter-button" data-filter="3" data-translate="wish-filter-3">3-stele</div>
                </div>
                
                <div class="wish-results" id="wishResults">
                    <!-- Rezultatele vor fi afișate aici -->
                    <h3 data-translate="wish-prompt">Trage pentru a vedea rezultatele!</h3>
                </div>
                
                <div class="buttons">
                    <button class="wish-button" id="wish1" data-translate="wish-button-1">Tragere x1</button>
                    <button class="wish-button" id="wish10" data-translate="wish-button-10">Tragere x10</button>
                </div>
                
                <div class="stats-container">
                    <div class="stats-box">
                        <p class="stats-title" data-translate="wish-stat-5">5-stele</p>
                        <p class="stats-value" id="stat5Star">0</p>
                    </div>
                    <div class="stats-box">
                        <p class="stats-title" data-translate="wish-stat-4">4-stele</p>
                        <p class="stats-value" id="stat4Star">0</p>
                    </div>
                    <div class="stats-box">
                        <p class="stats-title" data-translate="wish-stat-3">3-stele</p>
                        <p class="stats-value" id="stat3Star">0</p>
                    </div>
                    <div class="stats-box">
                        <p class="stats-title" data-translate="wish-stat-rate">Rata 5*</p>
                        <p class="stats-value" id="stat5Rate">0%</p>
                    </div>
                </div>
                
                <div class="pity-history">
                    <h3 data-translate="wish-pity-history">Istoric Pity 5-stele</h3>
                    <div id="pityHistoryList">
                        <p class="empty-collection" data-translate="wish-empty-pity">Niciun personaj de 5 stele obținut încă.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Pagina Caractere -->
        <div class="page" id="characters">
            <div class="collection-container">
                <h1 data-translate="characters-title">Colecția de Caractere</h1>
                
                <div class="rarity-tabs">
                    <div class="rarity-tab active" data-rarity="5" data-translate="characters-tab-5">5-stele</div>
                    <div class="rarity-tab" data-rarity="4" data-translate="characters-tab-4">4-stele</div>
                </div>
                
                <div class="collection-grid" id="charactersGrid">
                    <!-- Caracterele vor fi afișate aici -->
                </div>
            </div>
        </div>
        
        <!-- Pagina Arme -->
        <div class="page" id="weapons">
            <div class="collection-container">
                <h1 data-translate="weapons-title">Colecția de Arme</h1>
                
                <div class="rarity-tabs">
                    <div class="rarity-tab active" data-rarity="5" data-translate="weapons-tab-5">5-stele</div>
                    <div class="rarity-tab" data-rarity="4" data-translate="weapons-tab-4">4-stele</div>
                    <div class="rarity-tab" data-rarity="3" data-translate="weapons-tab-3">3-stele</div>
                </div>
                
                <div class="collection-grid" id="weaponsGrid">
                    <!-- Armele vor fi afișate aici -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Firebase App (core) -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<!-- Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>\
    <script>
        // Import the functions you need from the SDKs you need
        // ȘTERGE aceste linii din scriptul tău!
        // import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";
        const firebaseConfig = {
        apiKey: "AIzaSyBIJcN5IUCZSaxO6AWiCYDHB-Kxrk1UEz4",
        authDomain: "wuwaemy.firebaseapp.com",
        projectId: "wuwaemy",
        storageBucket: "wuwaemy.appspot.com ",
        messagingSenderId: "959818398485",
        appId: "1:959818398485:web:2691ee4f42c8336d1d071c",
        measurementId: "G-MSYL1JZ0QG"
        };
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
        document.addEventListener('DOMContentLoaded', () => {
            // Game data
           const characters = [
                // 5-star
                {name: "Aalto", rarity: 4, image: "https://www.prydwen.gg/static/28692b3a188f6b7b14a9d28aa90bf3c8/b26e2/aalto_card.webp" },
                {name: "Augusta", rarity: 5, image: "https://www.prydwen.gg/static/2f1f1aad1444416525bca51ce823bff7/b26e2/aug_card.webp" },
                {name: "Baizhi", rarity: 4, image: "https://www.prydwen.gg/static/3752f18605107b5fdb36835e9e7a2b90/b26e2/baizhi_card.webp" },
                {name: "Brant", rarity: 5, image: "https://www.prydwen.gg/static/30c84393d4f1fff8fcdb71ef6be8e090/b26e2/card_brant.webp" },
                {name: "Calcharo", rarity: 5, image: "https://www.prydwen.gg/static/7b01c2f05825303762d3e6b9da538c7d/b26e2/kakarot_card.webp" },
                {name: "Camellya", rarity: 5, image: "https://www.prydwen.gg/static/fa50106c1d7d6d2f02033da9c00628f1/b26e2/card_cam.webp" },
                {name: "Cantarella", rarity: 5, image: "https://www.prydwen.gg/static/c62fb9a25dd8420d6fc03c1ca064dae2/b26e2/card_canta.webp" },
                {name: "Carlotta", rarity: 5, image: "https://www.prydwen.gg/static/72a394e25463af4c5b9c309f516c9d17/b26e2/card_carlotta.webp" },
                {name: "Cartethyia", rarity: 5, image: "https://www.prydwen.gg/static/f63677cedd1006e204f353b1f3c0af14/b26e2/cart_card.webp" },
                {name: "Changli", rarity: 5, image: "https://www.prydwen.gg/static/7eb8b347a3aa1837164c79a5e520d268/b26e2/card_changli.webp" },
                {name: "Chisa", rarity: 5, image: "https://www.prydwen.gg/static/1e11acd3163c86536e6c69aa7005424a/b26e2/chisa_card.webp" },
                {name: "Chixia", rarity: 4, image: "https://www.prydwen.gg/static/689148c2dc5b0b38aeb2c75ca8b3ef65/b26e2/chixia_card.webp" },
                {name: "Ciaccona", rarity: 5, image: "https://www.prydwen.gg/static/b70837a5b18151413c72027b8ddfac64/b26e2/cia_card.webp" },
                {name: "Danjin", rarity: 4, image: "https://www.prydwen.gg/static/431f962f5a8febb92f44ae9138aa5e01/b26e2/danjin_card.webp" },
                {name: "Encore", rarity: 5, image: "https://www.prydwen.gg/static/0acc12c57906dc3c1f47e038832ec1f4/b26e2/encore_card.webp" },
                {name: "Galbrena", rarity: 5, image: "https://www.prydwen.gg/static/aa301f37c792e3d46dce891092c9cc0f/b26e2/gal_card.webp" },
                {name: "Iuno", rarity: 5, image: "https://www.prydwen.gg/static/250723737f0c5c477d1e161f5991c9fc/b26e2/iuno_card.webp" },
                {name: "Jianxin", rarity: 5, image: "https://www.prydwen.gg/static/c215e7a42cbfd78f85455f192dc0e4f/b26e2/jiaxin_card.webp" },
                {name: "Jinshi", rarity: 5, image: "https://www.prydwen.gg/static/136095b0f95ac4be3ddc7e2d585855bf/b26e2/jihni_card.webp" },
                {name: "Jiyan", rarity: 5, image: "https://www.prydwen.gg/static/5020d60083afc09d2fb6bce4a35225bc/b26e2/jiyan_card.webp" },
                {name: "Lingyang", rarity: 5, image: "https://www.prydwen.gg/static/672fdaae2b01f8355d5631a989e5f472/b26e2/ling_card.webp" },
                {name: "Lumi", rarity: 4 , image: "https://www.prydwen.gg/static/f25eefa86b00502ff430328006610ca2/b26e2/card_lumi.webp" },
                {name: "Lupa", rarity: 5, image: "https://www.prydwen.gg/static/8b4af672cd0b39da9882c9aedab02893/b26e2/lupa_card.webp" },
                {name: "Mortefi", rarity: 4, image: "https://www.prydwen.gg/static/afa511d7b0c173247db7478c15e7e8d7/b26e2/mortefi_card.webp" },
                {name: "Phoebe", rarity: 5, image: "https://www.prydwen.gg/static/5dc88527029d541ce29c09eb9e34944c/b26e2/card_phoebe.webp" },
                {name: "Phrolova", rarity: 5, image: "https://www.prydwen.gg/static/36c6e5dae2dd77cd0b36bb0383ec28c6/b26e2/phr_card.webp" },
                {name: "Qiuyuan", rarity: 5, image: "https://www.prydwen.gg/static/7fe009cd5b71e9ba70125318aece3ef9/b26e2/qiu_card.webp" },
                {name: "Roccia", rarity: 5, image: "https://www.prydwen.gg/static/3cdda48d32ebb2b5185dfbb1f5fac561/b26e2/card_roccia.webp" },
                {name: "Sanhua", rarity: 4, image: "https://www.prydwen.gg/static/f67966dd31af657ac8612d36006d5874/b26e2/senhua_card.webp" },
                {name: "Shorekeeper", rarity: 5, image: "https://www.prydwen.gg/static/53a7609e743512dbf5f89bb78cc7bab4/b26e2/card_keeper.webp" },
                {name: "Taoqi", rarity: 4, image: "https://www.prydwen.gg/static/9759a6ea13fefd1bc632650a0a657e8e/b26e2/taoqi_card.webp" },
                {name: "Verina", rarity: 5, image: "https://www.prydwen.gg/static/dd5bdface07cef9b868fe8214b0988ed/b26e2/verina_card.webp" },
                {name: "Xiangli Yao", rarity: 5, image: "https://www.prydwen.gg/static/698d0d5f2ba882de8f3d5494e622e940/b26e2/card_xiang.webp" },
                {name: "Yangyang", rarity: 4, image: "https://wutheringwaves.gg/wp-content/uploads/sites/8/2024/05/Wuthering-Waves-Yangyang-Build-Guide.png" },
                {name: "Yinlin", rarity: 5, image: "https://www.prydwen.gg/static/a2b0c34a81e57a52165da5b356be412c/b26e2/yinglin_card.webp" },
                {name: "Youhu", rarity: 4, image: "https://www.prydwen.gg/static/c4b47996ef9c20aa6c2fc04c9bd7cfa3/b26e2/card_youhu.webp" },
                {name: "Yuanwu", rarity: 4, image: "https://www.prydwen.gg/static/fb4fc64e05d0d40ef90adc4527dc93ea/b26e2/yuanwu_card.webp" },
                {name: "Zani", rarity: 5, image: "https://www.prydwen.gg/static/505ab092ab4d706f757a89bac424b378/b26e2/card_zani.webp" },
                {name: "Zhezhi", rarity: 5, image: "https://www.prydwen.gg/static/50c9470f533efed9b28076e92230308b/b26e2/card_zhe.webp" },
            ];
            const weapons = [
               {name: "Beguiling Melody", rarity: 3, image: "https://www.prydwen.gg/static/e006b16c6bff6b997daa80cd666e608e/d8057/21010063.webp" },
               {name: "Broadblade of Night", rarity: 3, image: "https://www.prydwen.gg/static/06704904c9b54f1f95a2384dbfa766a0/d8057/21010013.webp" },
               {name: "Broadblade of Voyager", rarity: 3, image: "https://www.prydwen.gg/static/b4dd91a36c45c9b91210f48e1c6e0412/d8057/21010043.webp" },
               {name: "Gauntlets of Night", rarity: 3, image: "https://www.prydwen.gg/static/6d5eb509855384a14310dae5eaed1b5c/d8057/21040013.webp" },
               {name: "Gauntlets of Voyager", rarity: 3, image: "https://www.prydwen.gg/static/c548c2684186ab49e0c93d22552a52f7/d8057/21040043.webp" },
               {name: "Guardian Broadblade", rarity: 3, image: "https://www.prydwen.gg/static/697650a8647ce95de4506d788e32a656/d8057/21010053.webp" },
               {name: "Guardian Gauntlets", rarity: 3, image: "https://www.prydwen.gg/static/14c2bb71de9bed7ffb002f3443c9535b/d8057/21040053.webp" },
               {name: "Guardian Pistols", rarity: 3, image: "https://www.prydwen.gg/static/cdcfd1ad35cd9b0dd9fc423923e5b6b1/d8057/21030053.webp" },
               {name: "Guardian Rectifier",rarity: 3, image: "https://www.prydwen.gg/static/31c05da7e286f382e049ae690630e226/d8057/21050053.webp" },
               {name: "Guardian Sword", rarity: 3, image: "https://www.prydwen.gg/static/12690208ea634a52cc3c1625bf807dc2/d8057/21020053.webp" },
               {name: "Originite: Type I", rarity: 3, image: "https://www.prydwen.gg/static/08c31c2ee5d804bddba208020110e090/d8057/21010023.webp" },
               {name: "Originite: Type II", rarity: 3, image: "https://static.wikia.nocookie.net/wutheringwaves/images/6/63/Weapon_Originite_Type_III.png/revision/latest?cb=20240526015618" },
               {name: "Originite: Type III", rarity: 3, image: "https://static.wikia.nocookie.net/wutheringwaves/images/6/63/Weapon_Originite_Type_III.png/revision/latest/thumbnail/width/360/height/360?cb=20240526015618" },
               {name: "Originite: Type IV", rarity: 3, image: "https://static.wikia.nocookie.net/wutheringwaves/images/0/01/Weapon_Originite_Type_IV.png/revision/latest?cb=20240526015619" },
               {name: "Originite: Type V", rarity: 3, image: "https://www.prydwen.gg/static/4fd54319bbca3cde057b4c3f0d873237/d8057/21050023.webp" },
               {name: "Pistols of Night", rarity: 3, image: "https://static.wikia.nocookie.net/wutheringwaves/images/6/63/Weapon_Pistols_of_Night.png/revision/latest?cb=20240526011400" },
               {name: "Pistols of Voyager", rarity: 3, image: "https://www.prydwen.gg/static/367ed9fc905e5a5648eed30710e7244e/d8057/21030043.webp" },
               {name: "Rectifier of Night", rarity: 3, image: "https://www.prydwen.gg/static/03b6aebe9897a053b78c05b116f61d06/d8057/21050013.webp" },
               {name: "Rectifier of Voyager", rarity: 3, image: "https://static.wikia.nocookie.net/wutheringwaves/images/9/9e/Weapon_Rectifier_of_Voyager.png/revision/latest?cb=20240526010359" },
               {name: "Sword of Night", rarity: 3, image: "https://www.prydwen.gg/static/42a972faea539fc6c622218562054d5a/d8057/21020013.webp" },
               {name: "Sword of Voyager", rarity: 3, image: "https://www.prydwen.gg/static/a54fbd2658dc0b17e57bfb1fb0186e6b/d8057/21020043.webp" },
               {name: "Amity Accord", rarity: 4, image: "https://www.prydwen.gg/static/bd46a459b49550b3594a4a9f42e107fb/d8057/21040044.webp" },
               {name: "Augment",rarity: 4, image: "https://www.prydwen.gg/static/98f0b950aa2740ae3612015d50786ee2/d8057/21050074.webp" },
               {name: "Autumntrace", rarity: 4, image: "https://www.prydwen.gg/static/adc80fa7d937da837ced0d5161898ee6/d8057/21010074.webp" },
               {name: "Broadblade#41", rarity: 4, image: "https://www.prydwen.gg/static/d92d1a7f1687f1f26b77fc4a567bf787/d8057/21010034.webp" },
               {name: "Cadenza", rarity: 4, image: "https://www.prydwen.gg/static/3411e0520354d10c53ab75f9557b641a/d8057/21030024.webp" },
               {name: "Call of the Abyss", rarity: 4, image: "https://www.prydwen.gg/static/d5b94442047d06ba570e6109d6d98226/d8057/21050017.webp" },
               {name: "Celestial Spiral", rarity: 4, image: "https://www.prydwen.gg/static/6bf49490260e1bf6c29984f786eeb4db/d8057/21040084.webp" },
               {name: "Comet Flare", rarity: 4, image: "https://www.prydwen.gg/static/2afa7da0f06e8360651d812f8e75eeec/d8057/21050064.webp" },
               {name: "Commando of Conviction", rarity: 4, image: "https://www.prydwen.gg/static/fdd237561891d62b1a797f4abc373e59/d8057/21020044.webp" },
               {name: "Dauntless Evernight", rarity: 4, image: "https://www.prydwen.gg/static/ff9b1b486e67e7133c92236b8a25b899/d8057/21010044.webp" },
               {name: "Discord", rarity: 4, image: "https://www.prydwen.gg/static/188f761e3e5ca1b039df7959c0034929/d8057/21010024.webp" },
               {name: "Fables of Wisdom", rarity:  4, image: "https://www.prydwen.gg/static/8cff04fe945ad669d9fdd96cf70bfbb0/d8057/21020094.webp" },
               {name: "Fusion Accretion", rarity: 4, image: "https://www.prydwen.gg/static/ec64c738dc213ff8577c0e49ec0eabd4/d8057/21050084.webp" },
               {name: "Gauntlets#21D", rarity: 4, image: "https://www.prydwen.gg/static/b4dfa7b4e2579ccf865d3715c08bb3a5/d8057/21040034.webp" },
               {name: "Helios Cleaver", rarity: 4, image: "https://www.prydwen.gg/static/7e404c8965d96ba9485904887fa13c1d/d8057/21010064.webp" },
               {name: "Hollow Mirage", rarity: 4, image: "https://www.prydwen.gg/static/f9d39aa09d3ac8c82f808e79ef20cee9/d8057/21040064.webp" },
               {name: "Jinzhou Keeper", rarity: 4, image: "https://www.prydwen.gg/static/3df20f62a915724b1e00969db9049390/d8057/21050044.webp" },
               {name: "Legend of Drunken Hero", rarity: 4, image: "https://www.prydwen.gg/static/db22af6d1117254126b02a55d4e3dde5/d8057/21040094.webp" },
               {name: "Lumingloss", rarity: 4, image: "https://www.prydwen.gg/static/3c96fa22b3ec2f92dd1062fe4bd833cd/d8057/21020074.webp" },
               {name: "Lunar Cutter", rarity: 4, image: "https://static.wikia.nocookie.net/wutheringwaves/images/c/ca/Weapon_Lunar_Cutter.png/revision/latest?cb=20240526011750" },
               {name: "Marcato", rarity: 4, image: "https://www.prydwen.gg/static/a1a116a62c73e15ae365e73dbeba60e0/d8057/21040024.webp" },
               {name: "Mediations on Mercy", rarity: 4, image: "https://www.prydwen.gg/static/17956cd3406249c8f12edbf5464ec1b5/d8057/21010094.webp" },
               {name: "Novaburst", rarity: 4, image: "https://www.prydwen.gg/static/ff30d714609a1a96237c12dfcb0e248b/d8057/21030064.webp" },
               {name: "Ocean's Gift", rarity: 4, image: "https://www.prydwen.gg/static/ac890a3f96908f1f0481185c222db19a/d8057/21050027.webp" },
               {name: "Overture", rarity: 4, image: "https://www.prydwen.gg/static/c7245f70c6282909433bb73081571507/d8057/21020024.webp" },
               {name: "Pistols#26", rarity: 4, image: "https://www.prydwen.gg/static/40200b1f5449a8cd8655aa7cd96b6714/d8057/21030034.webp" },
               {name: "Rectifier#25", rarity: 4, image: "https://www.prydwen.gg/static/29e9a9de172784c2de4f0d76e371a60b/d8057/21050034.webp" },
               {name: "Relativistic Jet", rarity: 4, image: "https://www.prydwen.gg/static/f7d0db605e6df4851bbc61329d788026/d8057/21030084.webp" },
               {name: "Romance in Farewell", rarity: 4, image: "https://www.prydwen.gg/static/3d67322bfd1789fadedb23631aee70cd/d8057/21030094.webp" },
               {name: "Somnoire Anchor", rarity: 4, image: "https://www.prydwen.gg/static/8096f34617104e3f4c69d70007e8e351/d8057/21020017.webp" },
               {name: "Stonard", rarity: 4, image: "https://www.prydwen.gg/static/0ec71b53bda686cfa3da5c255c4e6014/d8057/21040074.webp" },
               {name: "Sword#18", rarity: 4, image: "https://www.prydwen.gg/static/360e564b64befe84af30a0a2fa79c0b5/d8057/21020034.webp" },
               {name: "Thunderbold", rarity: 4, image: "https://www.prydwen.gg/static/5cd96efa005e20f2a22f50a3fdf8dd0a/d8057/21030074.webp" },
               {name: "Undying Flame", rarity: 4, image: "https://www.prydwen.gg/static/56b1822228eafd7b28de77acf9b3f871/d8057/21030044.webp" },
               {name: "Variation", rarity: 4, image: "https://www.prydwen.gg/static/17b3ecd853dc96c67fbd61529e8f20cc/d8057/21050024.webp" },
               {name: "Waltz in Masquerade", rarity: 4, image: "https://www.prydwen.gg/static/3f5985f963b9534560b68b09e15a3b61/d8057/21050094.webp" },
               {name: "Waning Redshift", rarity: 4, image: "https://www.prydwen.gg/static/a9dec34478e09071ff40306d7bb43e30/d8057/21010084.webp" },
               {name: "Abyss Surges", rarity: 5, image: "https://www.prydwen.gg/static/da96eff40570b44e7ad147a1f02fb010/d8057/21040015.webp" },
               {name: "Age of Harvest", rarity: 5, image: "https://www.prydwen.gg/static/4618aff3766c7321a6ed5b90a5ba5233/d8057/21010026.webp" },
               {name: "Blazing Brilliance", rarity: 5, image: "https://www.prydwen.gg/static/d10d36537a00df4dbb097bbf060882e5/d8057/21020016.webp" },
               {name: "Blazing Justice", rarity: 5, image: "https://www.prydwen.gg/static/56209339a7d77fa2aba666782c5edd4d/d8057/21040036.webp" },
               {name: "Bloodpact's Pledge", rarity: 5, image: "https://www.prydwen.gg/static/82e03cb3a85e7a7099208399d405dcb3/d8057/21020046.webp" },
               {name: "Cosmic Ripples", rarity: 5, image: "https://www.prydwen.gg/static/39c57180711200564883c36983cc61bf/d8057/21050015.webp" },
               {name: "Defier's Thorn", rarity: 5, image: "https://www.prydwen.gg/static/724513a7283abb524ffea4341e11cc81/d8057/21020056.webp" },
               {name: "Emerald of Genesis", rarity: 5, image: "https://www.prydwen.gg/static/30143bcc97126ddc90c6f0a143d2f034/d8057/21020015.webp" },
               {name: "Lethean Elegy", rarity: 5, image: "https://www.prydwen.gg/static/038c0171b512d8628d9a82a0ef2954c8/d8057/21050066.webp" },
               {name: "Luminous Hymn", rarity: 5, image: "https://www.prydwen.gg/static/aa87373361d2f01d5e8664dd81f3e4bd/d8057/21050046.webp" },
               {name: "Lustrous Razor", rarity: 5, image: "https://static.wikia.nocookie.net/wutheringwaves/images/c/c1/Weapon_Lustrous_Razor.png/revision/latest?cb=20240606152146" },
               {name: "Red Spring", rarity: 5, image: "https://www.prydwen.gg/static/df316ecf3de0e6c72f51382c85266ed6/d8057/21020026.webp" },
               {name: "Rime-Draped Sprouts", rarity: 5, image: "https://www.prydwen.gg/static/616d8054f1f14435f9d963e6f338f200/d8057/21050026.webp" },
               {name: "Static Mist", rarity: 5, image: "https://www.prydwen.gg/static/7d6753ee032694bd071ccdd5d5ba5b3b/d8057/21030015.webp" },
               {name: "Stellar Symphony", rarity: 5, image: "https://www.prydwen.gg/static/0c478cd8efeab343c930d70b32eb1fa6/d8057/21050036.webp" },
               {name: "Stringmaster", rarity: 5, image: "https://www.prydwen.gg/static/8ff1fade69b3c0c324b49542bd182b06/d8057/21050016.webp" },
               {name: "The Last Dance", rarity: 5, image: "https://www.prydwen.gg/static/e2a821935b5401e062fdedf5a0f053b1/d8057/21030016.webp" },
               {name: "Tragicomedy", rarity: 5, image: "https://www.prydwen.gg/static/47ea08cce530ca69535b6a53e5d8a101/d8057/21040026.webp" },
               {name: "Unflickering Valor", rarity: 5, image: "https://www.prydwen.gg/static/3f8e4381cb746d3db5d78a4f7b221979/d8057/21020036.webp" },
               {name: "Verdant Summit", rarity: 5, image: "https://www.prydwen.gg/static/628bb28c1fe21823b30de4abe067ce5d/d8057/21010016.webp" },
               {name: "Verity's Handle", rarity: 5, image: "https://www.prydwen.gg/static/725db1ce3c32dac3c843deeb9da9feec/d8057/21040016.webp" },
               {name: "Whispers of Sirens", rarity: 5, image: "https://www.prydwen.gg/static/85e5622e263df3634be85a04d624343c/d8057/21050056.webp" },
               {name: "Wildfire Mark", rarity: 5, image: "https://www.prydwen.gg/static/0d3e3193c82c0668a793c4cd0762a5d4/d8057/21010036.webp" },
               {name: "Woodland Aria", rarity: 5, image: "https://www.prydwen.gg/static/4bd8e13dc74fe0db2936df08ecc86861/d8057/21030026.webp" },
            ];
            
            const allItems = [...characters, ...weapons];
            
            // DOM Elements
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');
            
            // Authentication elements
            const authButton = document.getElementById('authButton');
            const authModal = document.getElementById('authModal');
            const closeModal = document.getElementById('closeModal');
            const authTabs = document.querySelectorAll('.auth-tab');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const loginMessage = document.getElementById('loginMessage');
            const registerMessage = document.getElementById('registerMessage');
            const userInfo = document.getElementById('userInfo');
            const usernameSpan = document.getElementById('username');
            const welcomeMessage = document.getElementById('welcomeMessage');
            
            // Language selector elements
            const languageButton = document.getElementById('languageButton');
            const languageDropdown = document.getElementById('languageDropdown');
            const languageOptions = document.querySelectorAll('.language-option');
            const currentFlag = document.getElementById('currentFlag');
            const currentLang = document.getElementById('currentLang');
            
            // Wish page elements
            const wish1Button = document.getElementById('wish1');
            const wish10Button = document.getElementById('wish10');
            const wishResultsDiv = document.getElementById('wishResults');
            const totalWishesSpan = document.getElementById('totalWishes');
            const pity5StarSpan = document.getElementById('pity5Star');
            const pity4StarSpan = document.getElementById('pity4Star');
            const stat5Star = document.getElementById('stat5Star');
            const stat4Star = document.getElementById('stat4Star');
            const stat3Star = document.getElementById('stat3Star');
            const stat5Rate = document.getElementById('stat5Rate');
            const filterButtons = document.querySelectorAll('.filter-button');
            const pityHistoryList = document.getElementById('pityHistoryList');
            
            // Characters page elements
            const charactersGrid = document.getElementById('charactersGrid');
            const charactersRarityTabs = document.querySelectorAll('#characters .rarity-tab');
            
            // Weapons page elements
            const weaponsGrid = document.getElementById('weaponsGrid');
            const weaponsRarityTabs = document.querySelectorAll('#weapons .rarity-tab');
            
            // ANIMATION OVERLAY - Video Effect
            const wishAnimationOverlay = document.createElement('div');
            wishAnimationOverlay.id = 'wishAnimationOverlay';
            wishAnimationOverlay.className = 'wish-animation-overlay';
            wishAnimationOverlay.innerHTML = `
                <div class="video-container">
                    <video class="wish-video" autoplay muted playsinline id="wishVideo">
                        <!-- Video sources will be set dynamically based on rarity -->
                    </video>
                    <div class="wishing-text" data-translate="wish-animation-text">WISHING...</div>
                </div>
            `;
            document.body.appendChild(wishAnimationOverlay);
            const animationDuration = 5000; // 5 seconds for main animation
            
            // Video URLs to replace with actual video files!
            // Make sure these video files are available at the specified URLs.
            // Example videos from Mixkit are used for demonstration.
            const videoSources = {
                3: "Wishing 3.mp4",  // Example: 3-star video (blue)
                4: "Wishing 4.mp4",  // Example: 4-star video (purple)
                5: "Wishing 5.mp4"   // Example: 5-star video (gold)
            };
            
            // State variables
            let currentUser = null;
            let totalWishes = 0;
            let pity5Star = 0;
            let pity4Star = 0;
            let count5Star = 0;
            let count4Star = 0;
            let count3Star = 0;
            let currentFilter = 'all';
            let pityHistory = [];
            let obtainedCharacters = [];
            let obtainedWeapons = [];
            let last5StarWish = 0; // Tracks the total number of pulls at the last 5-star
            const PITY_5_STAR_MAX = 80;
            const PITY_4_STAR_MAX = 10;
            const RATE_5_STAR = 0.025; // 2.5% for 5-star
            
            // Translations
            const translations = {
                // Romanian
                ro: {
                    'logo': 'Wuthering Waves Collection',
                    'nav-main': 'Meniu Principal',
                    'nav-wish': 'Wish',
                    'nav-characters': 'Caractere',
                    'nav-weapons': 'Arme',
                    'auth-login': 'Autentificare',
                    'auth-logout': 'Deconectare',
                    'auth-title': 'Autentificare',
                    'auth-login-tab': 'Autentificare',
                    'auth-register-tab': 'Înregistrare',
                    'auth-username': 'Nume utilizator',
                    'auth-password': 'Parolă',
                    'auth-email': 'Email',
                    'auth-confirm-password': 'Confirmă parola',
                    'auth-login-btn': 'Autentificare',
                    'auth-register-btn': 'Înregistrare',
                    'auth-error-login': 'Nume de utilizator sau parolă incorectă.',
                    'auth-error-username': 'Acest nume de utilizator este deja folosit.',
                    'auth-error-email': 'Acest email este deja folosit.',
                    'auth-error-password': 'Parolele nu se potrivesc.',
                    'auth-success-register': 'Înregistrare reușită! Acum te poți autentifica.',
                    'main-title': 'Wuthering Waves Collection',
                    'main-welcome': 'Bun venit în lumea Wuthering Waves!',
                    'main-description-1': 'Acest site este dedicat colecționarilor și fanilor jocului Wuthering Waves. Aici poți simula sistemul de "wish" pentru a obține personaje și arme, poți vizualiza colecția ta și poți urmări progresul tău în joc.',
                    'main-description-2': 'Scopul nostru este să oferim o experiență cât mai apropiată de cea reală, cu rate de drop personalizabile și un design atractiv.',
                    'main-login-prompt': 'Autentifică-te pentru a-ți salva progresul!',
                    'feature-simulator-title': 'Simulator Wish',
                    'feature-simulator-desc': 'Simulează sistemul de wish din joc cu rate personalizabile și pity tracking pentru 5 stele.',
                    'feature-characters-title': 'Colecție Personaje',
                    'feature-characters-desc': 'Vizualizează toate personajele pe care le-ai obținut, organizate după raritate.',
                    'feature-weapons-title': 'Colecție Arme',
                    'feature-weapons-desc': 'Explorează arsenalul tău complet, cu toate armele organizate pe categorii.',
                    'wish-title': 'Wuthering Waves Wishing Simulator',
                    'wish-description': 'Apasă pe butoane pentru a face o tragere!',
                    'wish-total-wishes': 'Total Trageri: ',
                    'wish-pity-5': 'Pity 5-stele: ',
                    'wish-pity-4': 'Pity 4-stele: ',
                    'wish-filter-all': 'Toate',
                    'wish-filter-5': '5-stele',
                    'wish-filter-4': '4-stele',
                    'wish-filter-3': '3-stele',
                    'wish-prompt': 'Trage pentru a vedea rezultatele!',
                    'wish-button-1': 'Tragere x1',
                    'wish-button-10': 'Tragere x10',
                    'wish-stat-5': '5-stele',
                    'wish-stat-4': '4-stele',
                    'wish-stat-3': '3-stele',
                    'wish-stat-rate': 'Rata 5*',
                    'wish-pity-history': 'Istoric Pity 5-stele',
                    'wish-empty-pity': 'Niciun personaj de 5 stele obținut încă.',
                    'wish-animation-text': 'WISHING...',
                    'characters-title': 'Colecția de Caractere',
                    'characters-tab-5': '5-stele',
                    'characters-tab-4': '4-stele',
                    'characters-empty': 'Niciun personaj de {rarity}-stele obținut încă.',
                    'weapons-title': 'Colecția de Arme',
                    'weapons-tab-5': '5-stele',
                    'weapons-tab-4': '4-stele',
                    'weapons-tab-3': '3-stele',
                    'weapons-empty': 'Nicio armă de {rarity}-stele obținută încă.',
                    'rarity-text': '{rarity}-stele'
                },
                // English
                en: {
                    'logo': 'Wuthering Waves Collection',
                    'nav-main': 'Main Menu',
                    'nav-wish': 'Wish',
                    'nav-characters': 'Characters',
                    'nav-weapons': 'Weapons',
                    'auth-login': 'Login',
                    'auth-logout': 'Logout',
                    'auth-title': 'Login',
                    'auth-login-tab': 'Login',
                    'auth-register-tab': 'Register',
                    'auth-username': 'Username',
                    'auth-password': 'Password',
                    'auth-email': 'Email',
                    'auth-confirm-password': 'Confirm Password',
                    'auth-login-btn': 'Login',
                    'auth-register-btn': 'Register',
                    'auth-error-login': 'Incorrect username or password.',
                    'auth-error-username': 'This username is already in use.',
                    'auth-error-email': 'This email is already in use.',
                    'auth-error-password': 'Passwords do not match.',
                    'auth-success-register': 'Registration successful! You can now login.',
                    'main-title': 'Wuthering Waves Collection',
                    'main-welcome': 'Welcome to the world of Wuthering Waves!',
                    'main-description-1': 'This site is dedicated to collectors and fans of the Wuthering Waves game. Here you can simulate the "wish" system to get characters and weapons, view your collection, and track your progress in the game.',
                    'main-description-2': 'Our goal is to provide an experience as close to reality as possible, with customizable drop rates and an attractive design.',
                    'main-login-prompt': 'Login to save your progress!',
                    'feature-simulator-title': 'Wish Simulator',
                    'feature-simulator-desc': 'Simulate the game\'s wish system with customizable rates and pity tracking for 5-star items.',
                    'feature-characters-title': 'Character Collection',
                    'feature-characters-desc': 'View all the characters you\'ve obtained, organized by rarity.',
                    'feature-weapons-title': 'Weapon Collection',
                    'feature-weapons-desc': 'Explore your complete arsenal, with all weapons organized by categories.',
                    'wish-title': 'Wuthering Waves Wishing Simulator',
                    'wish-description': 'Press the buttons to make a pull!',
                    'wish-total-wishes': 'Total Pulls: ',
                    'wish-pity-5': '5-star Pity: ',
                    'wish-pity-4': '4-star Pity: ',
                    'wish-filter-all': 'All',
                    'wish-filter-5': '5-star',
                    'wish-filter-4': '4-star',
                    'wish-filter-3': '3-star',
                    'wish-prompt': 'Pull to see the results!',
                    'wish-button-1': 'Pull x1',
                    'wish-button-10': 'Pull x10',
                    'wish-stat-5': '5-star',
                    'wish-stat-4': '4-star',
                    'wish-stat-3': '3-star',
                    'wish-stat-rate': '5* Rate',
                    'wish-pity-history': '5-star Pity History',
                    'wish-empty-pity': 'No 5-star characters obtained yet.',
                    'wish-animation-text': 'WISHING...',
                    'characters-title': 'Character Collection',
                    'characters-tab-5': '5-star',
                    'characters-tab-4': '4-star',
                    'characters-empty': 'No {rarity}-star characters obtained yet.',
                    'weapons-title': 'Weapon Collection',
                    'weapons-tab-5': '5-star',
                    'weapons-tab-4': '4-star',
                    'weapons-tab-3': '3-star',
                    'weapons-empty': 'No {rarity}-star weapons obtained yet.',
                    'rarity-text': '{rarity}-star'
                }
            };
            
            // Current language
            let currentLanguage = localStorage.getItem('wwLanguage') || 'ro';
            
            // --- User management functions ---
            function getUsers() {
                const users = localStorage.getItem('wwUsers');
                return users ? JSON.parse(users) : [];
            }
            
            function saveUsers(users) {
                localStorage.setItem('wwUsers', JSON.stringify(users));
            }
            
            function saveUserDataToLocalStorage(username, data) {
                localStorage.setItem(`wwUserData_${username}`, JSON.stringify(data));
            }
            
            function getUserData(username) {
                const userData = localStorage.getItem(`wwUserData_${username}`);
                return userData ? JSON.parse(userData) : null;
            }
            
            function saveCurrentUserData() {
                if (!currentUser) return;
                
                const userData = {
                    totalWishes,
                    pity5Star,
                    pity4Star,
                    count5Star,
                    count4Star,
                    count3Star,
                    pityHistory,
                    obtainedCharacters,
                    obtainedWeapons,
                    last5StarWish
                };
                
                saveUserDataToLocalStorage(currentUser.username, userData);
            }
            
            // --- Translation functions ---
            function setLanguage(lang) {
                currentLanguage = lang;
                localStorage.setItem('wwLanguage', lang);
                
                // Update language button
                const activeOption = document.querySelector(`.language-option[data-lang="${lang}"]`);
                if (activeOption) {
                    const flagSrc = activeOption.querySelector('.flag-icon').src;
                    const langText = lang === 'ro' ? 'RO' : 'EN';
                    
                    currentFlag.src = flagSrc;
                    currentLang.textContent = langText;
                    
                    // Update active option
                    languageOptions.forEach(option => {
                        option.classList.remove('active');
                        if (option.dataset.lang === lang) {
                            option.classList.add('active');
                        }
                    });
                }
                
                // Update all elements with data-translate attributes
                document.querySelectorAll('[data-translate]').forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        // Check if the element has a placeholder
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.placeholder = translations[lang][key];
                        } else {
                            element.textContent = translations[lang][key];
                        }
                    }
                });
                
                // Update dynamic texts
                updateDynamicTexts();
            }
            
            function updateDynamicTexts() {
                // Update texts that contain variables
                const lang = currentLanguage;
                
                // Update texts for empty collections
                const emptyCharacters = document.querySelector('#characters .empty-collection');
                if (emptyCharacters) {
                    const rarity = document.querySelector('#characters .rarity-tab.active').dataset.rarity;
                    emptyCharacters.textContent = translations[lang]['characters-empty'].replace('{rarity}', rarity);
                }
                
                const emptyWeapons = document.querySelector('#weapons .empty-collection');
                if (emptyWeapons) {
                    const rarity = document.querySelector('#weapons .rarity-tab.active').dataset.rarity;
                    emptyWeapons.textContent = translations[lang]['weapons-empty'].replace('{rarity}', rarity);
                }
                
                // Update rarity texts
                document.querySelectorAll('.wish-item .rarity').forEach(element => {
                    const raritySpan = element.querySelector('span');
                    if (raritySpan) {
                        const rarity = raritySpan.dataset.rarity;
                        const rarityText = translations[lang]['rarity-text'].replace('{rarity}', rarity);
                        element.innerHTML = `${translations[lang]['wish-stat-' + rarity]}: <span class="rarity-text-${rarity}" data-rarity="${rarity}">${rarityText}</span>`;
                    }
                });
            }
            
            // --- User state change listener ---
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // user.displayName, user.email etc.
                    // Actualizează UI-ul pentru utilizator logat
                    currentUser = {
                        username: user.displayName || user.email,
                        email: user.email
                    };
                    usernameSpan.textContent = currentUser.username;
                    userInfo.style.display = 'flex';
                    authButton.textContent = translations[currentLanguage]['auth-logout'];
                    authButton.classList.remove('pulse');
                    welcomeMessage.style.display = 'none';
                    
                    // Load user data
                    loadUserData();
                } else {
                    // Actualizează UI-ul pentru utilizator delogat
                    userInfo.style.display = 'none';
                    authButton.textContent = translations[currentLanguage]['auth-login'];
                    authButton.classList.add('pulse');
                    welcomeMessage.style.display = 'block';
                }        
            });
            
            function loadUserData() {
                if (!currentUser) return;
                const userData = getUserData(currentUser.username);
                if (userData) {
                    totalWishes = userData.totalWishes || 0;
                    pity5Star = userData.pity5Star || 0;                    
                    pity4Star = userData.pity4Star || 0;
                    count5Star = userData.count5Star || 0;
                    count4Star = userData.count4Star || 0;
                    count3Star = userData.count3Star || 0;
                    pityHistory = userData.pityHistory || [];
                    obtainedCharacters = userData.obtainedCharacters || [];
                    obtainedWeapons = userData.obtainedWeapons || [];
                    last5StarWish = userData.last5StarWish || 0;
                    
                    // Update UI
                    totalWishesSpan.textContent = totalWishes;
                    pity5StarSpan.textContent = pity5Star;
                    pity4StarSpan.textContent = pity4Star;
                    stat5Star.textContent = count5Star;
                    stat4Star.textContent = count4Star;
                    stat3Star.textContent = count3Star;
                    
                    const rate5Star = totalWishes > 0 ? ((count5Star / totalWishes) * 100).toFixed(2) : 0;
                    stat5Rate.textContent = `${rate5Star}%`;
                    
                    updatePityHistory();
                    
                    // Update collections when user data is loaded
                    updateCharactersCollection();
                    updateWeaponsCollection();
                }
            }
            
            // --- Authentication modal handling ---
            authButton.addEventListener('click', () => {
    if (auth.currentUser) {
        auth.signOut();
        // Resetează UI-ul
    } else {
        // Deschide modalul de autentificare
        authModal.classList.add('active');
        loginForm.reset();
        registerForm.reset();
        loginMessage.className = 'form-message';
        registerMessage.className = 'form-message';
    }
});
            
            closeModal.addEventListener('click', () => {
                authModal.classList.remove('active');
            });
            
            // Switch between login and register tabs
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    
                    // Update active tab
                    authTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update active form
                    if (tabName === 'login') {
                        loginForm.classList.add('active');
                        registerForm.classList.remove('active');
                        document.querySelector('.modal-title').textContent = translations[currentLanguage]['auth-title'];
                    } else {
                        loginForm.classList.remove('active');
                        registerForm.classList.add('active');
                        document.querySelector('.modal-title').textContent = translations[currentLanguage]['auth-register-tab'];
                    }
                });
            });
            
            // Process login form
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginUsername').value; // Poți folosi și email aici
                const password = document.getElementById('loginPassword').value;

                auth.signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        authModal.classList.remove('active');
                        // Poți salva user-ul curent în variabila ta și să actualizezi UI-ul
                    })
                    .catch((error) => {
                        loginMessage.textContent = error.message;
                        loginMessage.className = 'form-message error';
                    });
            });
            
            // Process registration form
            registerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const username = document.getElementById('registerUsername').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                if (password !== confirmPassword) {
                    registerMessage.textContent = "Parolele nu se potrivesc.";
                    registerMessage.className = 'form-message error';
                    return;
                }

                auth.createUserWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        // Set displayName (opțional)
                        return userCredential.user.updateProfile({ displayName: username });
                    })
                    .then(() => {
                        registerMessage.textContent = "Înregistrare reușită! Acum te poți autentifica.";
                        registerMessage.className = 'form-message success';
                        registerForm.reset();
                        setTimeout(() => { authTabs[0].click(); }, 1500);
                    })
                    .catch((error) => {
                        registerMessage.textContent = error.message;
                        registerMessage.className = 'form-message error';
                    });
            });
            
            // --- Language selector handling ---
            languageButton.addEventListener('click', () => {
                languageDropdown.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!languageButton.contains(e.target) && !languageDropdown.contains(e.target)) {
                    languageDropdown.classList.remove('active');
                }
            });
            
            // Change language when an option is selected
            languageOptions.forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.dataset.lang;
                    setLanguage(lang);
                    languageDropdown.classList.remove('active');
                });
            });
            
            // --- Page navigation ---
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetPage = link.getAttribute('data-page');
                    
                    // Update active links
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    // Show target page
                    pages.forEach(page => {
                        page.classList.remove('active');
                        if (page.id === targetPage) {
                            page.classList.add('active');
                        }
                    });
                    
                    // Update collections when navigating to respective pages
                    if (targetPage === 'characters') {
                        updateCharactersCollection();
                    } else if (targetPage === 'weapons') {
                        updateWeaponsCollection();
                    }
                });
            });
            
            // --- Main pull function ---
            function performWish() {
                totalWishes++;
                pity5Star++;
                pity4Star++;
                let resultItem;
                const rand = Math.random();
                
                // Pity System Logic
                if (pity5Star >= PITY_5_STAR_MAX || (rand < RATE_5_STAR && pity5Star < PITY_5_STAR_MAX)) {
                    resultItem = getRandomItemByRarity(5);
                    pity5Star = 0;
                    pity4Star = 0;
                    count5Star++;
                    createSparkles();
                    
                    // Calculate pity for this 5-star
                    const pityCount = totalWishes - last5StarWish;
                    last5StarWish = totalWishes;
                    
                    // Add to pity history
                    pityHistory.push({
                        name: resultItem.name,
                        pity: pityCount
                    });
                    updatePityHistory();
                } else if (pity4Star >= PITY_4_STAR_MAX || (rand < 0.051 + RATE_5_STAR && pity4Star < PITY_4_STAR_MAX)) {
                    resultItem = getRandomItemByRarity(4);
                    pity4Star = 0;
                    count4Star++;
                } else {
                    resultItem = getRandomItemByRarity(3);
                    count3Star++;
                }
                
                // Add to appropriate collection
                if (characters.some(c => c.name === resultItem.name)) {
                    if (!obtainedCharacters.some(c => c.name === resultItem.name)) {
                        obtainedCharacters.push(resultItem);
                    }
                } else {
                    if (!obtainedWeapons.some(w => w.name === resultItem.name)) {
                        obtainedWeapons.push(resultItem);
                    }
                }
                
                // Save user data
                if (currentUser) {
                    saveCurrentUserData();
                }
                
                // Update result display
                const itemElement = document.createElement('div');
                itemElement.className = `wish-item rarity-${resultItem.rarity}-item reveal-item-${resultItem.rarity}`; // Add reveal animation class
                itemElement.dataset.rarity = resultItem.rarity;
                
                // Add rarity text in current language
                const rarityText = translations[currentLanguage]['rarity-text'].replace('{rarity}', resultItem.rarity);
                
                itemElement.innerHTML = `
                    <img src="${resultItem.image}" alt="${resultItem.name}">
                    <div class="details">
                        <p class="name">${resultItem.name}</p>
                        <p class="rarity">${translations[currentLanguage]['wish-stat-' + resultItem.rarity]}: <span class="rarity-text-${resultItem.rarity}" data-rarity="${resultItem.rarity}">${rarityText}</span></p>
                    </div>
                `;
                
                // Add special class for 5-star items
                if (resultItem.rarity === 5) {
                    itemElement.classList.add('special-glow');
                }
                
                return { element: itemElement, rarity: resultItem.rarity };
            }
            
            // --- Function to get a random item by rarity ---
            function getRandomItemByRarity(rarity) {
                const filteredItems = allItems.filter(item => item.rarity === rarity);
                const randomIndex = Math.floor(Math.random() * filteredItems.length);
                return filteredItems[randomIndex];
            }
            
            // --- UI update function ---
            function updateUI(results) {
                // This function is now called *after* items are revealed
                // Update counters
                totalWishesSpan.textContent = totalWishes;
                pity5StarSpan.textContent = pity5Star;
                pity4StarSpan.textContent = pity4Star;
                
                // Update stats
                stat5Star.textContent = count5Star;
                if(stat4Star) stat4Star.textContent = count4Star; // Check if element exists
                if(stat3Star) stat3Star.textContent = count3Star; // Check if element exists
                
                // Calculate 5-star rate
                const rate5Star = totalWishes > 0 ? ((count5Star / totalWishes) * 100).toFixed(2) : 0;
                stat5Rate.textContent = `${rate5Star}%`;
            }
            
            // --- Function to update pity history ---
            function updatePityHistory() {
                if (pityHistory.length === 0) {
                    pityHistoryList.innerHTML = `<p class="empty-collection" data-translate="wish-empty-pity">${translations[currentLanguage]['wish-empty-pity']}</p>`;
                    return;
                }
                
                pityHistoryList.innerHTML = '';
                // Display latest 5-star pulls at the top
                pityHistory.slice().reverse().forEach((item, index) => { 
                    const pityItem = document.createElement('div');
                    pityItem.className = 'pity-item';
                    pityItem.innerHTML = `
                        <span class="pity-character">${item.name}</span>
                        <span class="pity-count">${item.pity} pity</span>
                    `;
                    pityHistoryList.appendChild(pityItem);
                });
            }
            
            // --- Function to update character collection ---
            function updateCharactersCollection() {
                const activeRarity = document.querySelector('#characters .rarity-tab.active').getAttribute('data-rarity');
                const filteredCharacters = obtainedCharacters.filter(c => c.rarity == activeRarity);
                
                if (filteredCharacters.length === 0) {
                    const emptyText = translations[currentLanguage]['characters-empty'].replace('{rarity}', activeRarity);
                    charactersGrid.innerHTML = `<p class="empty-collection">${emptyText}</p>`;
                    return;
                }
                
                charactersGrid.innerHTML = '';
                filteredCharacters.forEach(character => {
                    const characterElement = document.createElement('div');
                    characterElement.className = 'collection-item';
                    
                    // Add rarity text in current language
                    const rarityText = translations[currentLanguage]['rarity-text'].replace('{rarity}', character.rarity);
                    
                    characterElement.innerHTML = `
                        <img src="${character.image}" alt="${character.name}">
                        <div class="info">
                            <h3 class="name">${character.name}</h3>
                            <p class="rarity rarity-text-${character.rarity}">${rarityText}</p>
                        </div>
                    `;
                    charactersGrid.appendChild(characterElement);
                });
            }
            
            // --- Function to update weapon collection ---
            function updateWeaponsCollection() {
                const activeRarity = document.querySelector('#weapons .rarity-tab.active').getAttribute('data-rarity');
                const filteredWeapons = obtainedWeapons.filter(w => w.rarity == activeRarity);
                
                if (filteredWeapons.length === 0) {
                    const emptyText = translations[currentLanguage]['weapons-empty'].replace('{rarity}', activeRarity);
                    weaponsGrid.innerHTML = `<p class="empty-collection">${emptyText}</p>`;
                    return;
                }
                
                weaponsGrid.innerHTML = '';
                filteredWeapons.forEach(weapon => {
                    const weaponElement = document.createElement('div');
                    weaponElement.className = 'collection-item';
                    
                    // Add rarity text in current language
                    const rarityText = translations[currentLanguage]['rarity-text'].replace('{rarity}', weapon.rarity);
                    
                    weaponElement.innerHTML = `
                        <img src="${weapon.image}" alt="${weapon.name}">
                        <div class="info">
                            <h3 class="name">${weapon.name}</h3>
                            <p class="rarity rarity-text-${weapon.rarity}">${rarityText}</p>
                        </div>
                    `;
                    weaponsGrid.appendChild(weaponElement);
                });
            }
            
            // --- Function to create sparkle effect ---
            function createSparkles() {
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'sparkle';
                        const wishContainer = document.querySelector('.wish-container'); // Get wish container reference
                        const rect = wishContainer.getBoundingClientRect();
                        sparkle.style.left = `${(Math.random() * rect.width)}px`;
                        sparkle.style.top = `${(Math.random() * rect.height)}px`;
                        wishContainer.appendChild(sparkle);
                        
                        setTimeout(() => {
                            sparkle.remove();
                        }, 1500);
                    }, i * 100);
                }
            }
            
            // --- Function to apply filter ---
            function applyFilter() {
                const items = wishResultsDiv.querySelectorAll('.wish-item');
                
                items.forEach(item => {
                    if (currentFilter === 'all') {
                        item.style.display = 'flex';
                    } else {
                        if (item.dataset.rarity === currentFilter) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    }
                });
            }
            
            // --- Event listeners for pull buttons ---
            wish1Button.addEventListener('click', () => handleWish(1));
            wish10Button.addEventListener('click', () => handleWish(10));
            
            async function handleWish(numWishes) {
                wish1Button.disabled = true;
                wish10Button.disabled = true;
                wishResultsDiv.innerHTML = '';
                
                // Determine the highest rarity obtained in this pull set
                let maxRarity = 0;
                let results = [];
                for (let i = 0; i < numWishes; i++) {
                    const wishResult = performWish();
                    results.push(wishResult);
                    if (wishResult.rarity > maxRarity) {
                        maxRarity = wishResult.rarity;
                    }
                }

                // Play the video corresponding to the highest rarity
                const video = document.getElementById('wishVideo');
                if (videoSources[maxRarity]) {
                    video.src = videoSources[maxRarity];
                    video.load(); // Load the video
                    video.play().catch(error => console.error("Video playback failed:", error)); // Play the video, handle potential errors
                    wishAnimationOverlay.classList.add('active');
                    
                    await new Promise(resolve => {
                        const onEnded = () => {
                            video.removeEventListener('ended', onEnded);
                            resolve();
                        };
                        video.addEventListener('ended', onEnded);
                        setTimeout(resolve, animationDuration); // Fallback to animationDuration
                    });
                } else {
                    console.warn(`No video source defined for rarity: ${maxRarity}`);
                    await new Promise(resolve => setTimeout(resolve, animationDuration));
                }
                
                wishAnimationOverlay.classList.remove('active');
                
                // Display all results after the animation
                results.reverse().forEach(res => wishResultsDiv.prepend(res.element));
                updateUI(results);
                
                wish1Button.disabled = false;
                wish10Button.disabled = false;
            }
            
            // --- Event listeners for filter buttons ---
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    currentFilter = button.dataset.filter;
                    
                    // Update active button
                    filterButtons.forEach(btn => {
                        if (btn.dataset.filter === currentFilter) {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    });
                    
                    // Apply filter
                    applyFilter();
                });
            });
            
            // --- Event listeners for rarity tabs in characters ---
            charactersRarityTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active tab
                    charactersRarityTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update displayed collection
                    updateCharactersCollection();
                });
            });
            
            // --- Event listeners for rarity tabs in weapons ---
            weaponsRarityTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active tab
                    weaponsRarityTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update displayed collection
                    updateWeaponsCollection();
                });
            });
            
            // Initialize language on page load
            setLanguage(currentLanguage);
            
            // Hamburger menu toggle
            const menuToggle = document.getElementById('menuToggle');
            const navLinksList = document.getElementById('navLinks');
            menuToggle.addEventListener('click', () => {
                navLinksList.classList.toggle('open');
            });
            // Close menu on link click
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    navLinksList.classList.remove('open');
                });
            });
        });
    </script>
</body>
</html>
